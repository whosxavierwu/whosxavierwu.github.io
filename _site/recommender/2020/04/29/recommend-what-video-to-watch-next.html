<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Recommending What Video to Watch Next: A Multitask Ranking System | whosxavierwu’s blog</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Recommending What Video to Watch Next: A Multitask Ranking System" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="概述" />
<meta property="og:description" content="概述" />
<link rel="canonical" href="http://localhost:4034/recommender/2020/04/29/recommend-what-video-to-watch-next.html" />
<meta property="og:url" content="http://localhost:4034/recommender/2020/04/29/recommend-what-video-to-watch-next.html" />
<meta property="og:site_name" content="whosxavierwu’s blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-04-29T22:55:00+08:00" />
<script type="application/ld+json">
{"url":"http://localhost:4034/recommender/2020/04/29/recommend-what-video-to-watch-next.html","headline":"Recommending What Video to Watch Next: A Multitask Ranking System","datePublished":"2020-04-29T22:55:00+08:00","dateModified":"2020-04-29T22:55:00+08:00","description":"概述","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4034/recommender/2020/04/29/recommend-what-video-to-watch-next.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4034/feed.xml" title="whosxavierwu's blog" /></head>
<body><script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      inlineMath: [['$','$']]
    }
  });
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Recommending What Video to Watch Next: A Multitask Ranking System</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2020-04-29T22:55:00+08:00" itemprop="datePublished">Apr 29, 2020
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="概述">概述</h1>

<p>在该论文中，YouTube提出了一种双塔结构的排序模型，新颖的点主要在于：</p>
<ol>
  <li>模型是基于多目标进行训练的；</li>
  <li>借鉴广告CTR中的思想，引入了用于消除位置偏差的浅层网络；</li>
  <li>引入了MMoE，带门控的专家网络；</li>
</ol>

<p>需要注意的一点是，该论文的应用场景与YouTube之前那篇经典论文<a href="https://whosxavierwu.github.io/recommender/2020/04/12/dnn-for-youtube-recommend.html">“Deep Neural Network for YouTube Recommendation System”</a>不同，之前的推荐场景是在首页推荐频道中，而本文的推荐场景是发生在，用户正在看或看完一个视频以后，紧接着YouTube进行推荐。</p>

<p><img src="http://localhost:4034/assets/youtube-watch_next.png" alt="Watch Next" /></p>

<h1 id="一召回">一、召回</h1>

<p>召回部分，文中说得非常笼统，用了一小段话就给带过了，这里只能逐句逐句来进行解析了：</p>

<blockquote>
  <p>Our video recommendation system uses multiple candidate generation algorithms, each of which captures one aspect of similarity between query video and candidate video.</p>
</blockquote>

<p>如果没有留意到业务应用场景的话，可能会对”query video”这个词感到懵逼，毕竟一般的推荐场景中不会有”query”这种东西。</p>

<p>这里的推荐是在用户看某个视频的时候就在旁边给他出一个推荐清单。由于正在观看的视频极有可能是用户当前感兴趣的内容，我们认为与该视频相关的视频也更有可能被点击观看，所以在推荐时需要考虑”watching video”，也就是”query video”。按这个思路，我们还能想到，其实可以用基于物品的协同过滤算法来作为baseline。</p>

<p>通过不同算法来捕捉”query video”和”candidate video”在不同方面的相似度。具体有哪些方面呢？</p>

<blockquote>
  <p>For example, one algorithm generates candidates by matching topics of query video.</p>
</blockquote>

<blockquote>
  <p>Another algorithm retrieves candidate videos based on how often the video has been watched together with the query video.</p>
</blockquote>

<p>作者举例说了两种，也是比较容易想到的：视频在主题上的相关性；两个视频间共现频率；</p>

<p>简单发散一下，我能想到的还有：</p>
<ul>
  <li>两个视频的UP主之间的相关性；</li>
  <li>两个视频在封面、标题上的相关性；</li>
  <li>两个视频在时长、观看人数上的相关性；</li>
  <li>……</li>
</ul>

<blockquote>
  <p>We construct a sequence model similar to [10] for generating personalized candidate given user history.</p>
</blockquote>

<p>借鉴了论文”Deep Neural Network for YouTube Recommendation System”（<a href="https://dl.acm.org/doi/10.1145/2959100.2959190">论文地址</a>、<a href="https://whosxavierwu.github.io/recommender/2020/04/12/dnn-for-youtube-recommend.html">博客地址</a>）的做法，来基于用户观看历史构建序列模型（类似于Word2Vec），进而生成候选视频。</p>

<blockquote>
  <p>We also use techniques mentioned in [25] to generate context-aware high recall relevant candidates.</p>
</blockquote>

<p>使用了”Efficient Training on Very Large Corpora via Gramian Estimation”（<a href="https://arxiv.org/abs/1807.07187">论文地址</a>）中的技术来生成与上下文相关的高召回候选集合。</p>

<h1 id="二排序">二、排序</h1>

<h2 id="1-问题定义">1. 问题定义</h2>

<p>前面说到，本文是对多目标进行建模，所以对问题、优化目标的定义是和通常情况下的不太一样。</p>

<p>通常情况下，我们的模型训练目标是点击CTR或视频观看时长，抽象来看，是对用户参与程度的反映。YouTube的该论文认为，除了参与度”engagement objectives”以外，推荐系统还应该考虑用户的满意度，也就是”satisfaction objectives”。满意度可以从用户对所推荐的视频点击like或者dismiss的操作来体现。</p>

<h2 id="2-数据准备">2. 数据准备</h2>

<h2 id="3-特征处理">3. 特征处理</h2>

<h2 id="4-模型训练">4. 模型训练</h2>

<h3 id="41-整体结构">4.1 整体结构</h3>

<h3 id="42-mmoe">4.2 MMoE</h3>

<h3 id="43-位置消偏">4.3 位置消偏</h3>

<h1 id="结语">结语</h1>

<h1 id="参考">参考</h1>

  </div><a class="u-url" href="/recommender/2020/04/29/recommend-what-video-to-watch-next.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">whosxavierwu&#39;s blog</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">whosxavierwu&#39;s blog</li><li><a class="u-email" href="mailto:whosxavierwu@gmail.com">whosxavierwu@gmail.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/whosxavierwu"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">whosxavierwu</span></a></li><li><a href="https://www.linkedin.com/in/zeweiwu"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg> <span class="username">zeweiwu</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Keep learning, deep learning. </p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
